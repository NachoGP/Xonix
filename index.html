<html>

<head>
    <title>HTML5 XoniX</title>

    <link rel="stylesheet" type="text/css" href="style/reset.min.css">
    <link rel="stylesheet" type="text/css" href="style/style.css">

    <script type="text/javascript" src="scripts/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="scripts/event_handler.js"></script>
    <script type="text/javascript" src="scripts/movable.js"></script>
    <script type="text/javascript" src="scripts/vector.js"></script>
    <script type="text/javascript" src="scripts/grid.js"></script>
    <script type="text/javascript" src="scripts/ball.js"></script>
    <script type="text/javascript" src="scripts/monster.js"></script>
    <script type="text/javascript" src="scripts/player.js"></script>
    <script type="text/javascript" src="scripts/game.js"></script>

    <script>
        var canvasWidth = 640,
            canvasHeight = 460,
            frame = 20,
            blockSize = 10;
        var game;
        
        function updateScore(value) {
            $('#score').html(value);
        }
        function updateLives(value) {
            $('#lives').html(value);
        }
        function updateConquered(value) {
            $('#conqured').html(value);
        }
        function updateTimer(value) {
            $('#timer').html(value);
        }
        function gameOver(value) {
            
        }
        
        $(document).ready(function() {
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            
            var game = new Game(canvasHeight / blockSize, canvasWidth / blockSize, blockSize, frame / blockSize, ctx);            
            game.addEventListener('conquer', updateConquered, this);
            game.addEventListener('fail', updateLives, this);
            game.addEventListener('score', updateScore, this);
            game.addEventListener('end', gameOver, this);
            game.addEventListener('timer', updateTimer, this);
            game.start();
            
            /*setInterval(function() {var text = $('#cursor').text(); text == "_" ? $('#cursor').text("") : $('#cursor').text("_");  }, 300);
            
            $(document).bind('keypress', function(e) {
                if ($('#user_name').text().length < 20) {
                    $('#user_name').text( $('#user_name').text() + String.fromCharCode(e.which));
                }
            });
            $(document).bind('keydown', function(e) { if (e.which == 8) { $('#user_name').text( $('#user_name').text().substr(0, $('#user_name').text().length - 1) ) }});*/
        });
    </script>
</head>

<body>
    <div id="container">
        <!--<div style="position: absolute; width:100%; height:100%; background: #000000; color: #ffffff; font-size: 30px;">
            <div>
                SCORE: 2001    
            </div>
            <div>
                YOUR SCORE IS ON OF THE BEST 15.
            </div>
            <div>
                ENTER YOUR NAME: <span id="user_name"></span><span id="cursor">_</span>
            </div>
            <div>
                <span style="text-decoration: underline; cursor: pointer;">PLAY AGAIN</span>
            </div>
        </div>-->
        <canvas id="canvas" width="640" height="460"></canvas>
        <div id="status">
            Score: <span id="score">0</span>    Xn: <span id="lives">3</span>   Full: <span id="conqured">0</span>%    Time: <span id="timer">90</span>
        </div>
    </div>
</body>

</html>